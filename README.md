# personal_relationship_in_email
李文轩 2019-07-29

##### 项目：用 PageRank 算法分析邮件里存在的人际关系

*这个项目并不考虑邮件本文，只在寄件人 (MetadataFrom) 和收件人 (MetadataTo)的数据中分析人际关系。

这个项目用的是希拉里公开的邮件作为例子。

数据集(希拉里公开的邮件)：https://www.kaggle.com/kaggle/hillary-clinton-emails

1. 数据加载:
个项目中，我用来希拉里公开的邮件作为数据；
全部数据都以 csv 格式储存。
整个项目中，emails.csv 储存着核心数据；里面的每一封邮件的寄件人和收件人信息是分析这些邮件中的人际关系的基本数据。
Persons.csv 和 aliases.csv 储存着相关的人名和别名；在统一寄件人和收件人的人名时需要用到。
2. 数据准备阶段：
这个阶段中，我将上一个阶段中加载的所有数据过滤成需要的形式。
在 emails.csv 的数据中，因为邮件本文不在考虑范围内，我只提取了寄件人和收件人的信息，并计算了每个人的邮件来往次数；
这个次数将会被用在之后的有向图中，作为权重。而 Persons.csv 和 aliases.csv 将会被用在统一人名的步骤中。
3. 数据挖掘阶段：
这个阶段中，我使用 NetworkX 库中的有向图类和 pagerank 函数对过滤后的数据进行分析。
我把计算好的边和权重作为参数，构建了有向图类。然后使用 pagerank 函数计算有向图中所有节点的 pr 值。
在绘制图表前，我根据 pr 值大小设置节点的大小，并把过小的节点去掉，提升可读性。
